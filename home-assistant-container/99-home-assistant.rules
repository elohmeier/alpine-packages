# udev rules for Home Assistant USB devices
# These rules provide symlinks and permissions for common Zigbee and Z-Wave adapters

# =============================================================================
# Zigbee Adapters
# =============================================================================

# Silicon Labs CP2102/CP2104 based adapters (common Zigbee coordinators)
# Includes: Sonoff Zigbee 3.0, ITEAD Sonoff, many CC2652 based sticks
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="ea60", \
    SYMLINK+="zigbee%n", GROUP="dialout", MODE="0660"

# Silicon Labs CP2102N (newer revision)
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="ea63", \
    SYMLINK+="zigbee%n", GROUP="dialout", MODE="0660"

# WCH CH9102/CH340 based adapters
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="1a86", ATTRS{idProduct}=="55d4", \
    SYMLINK+="zigbee%n", GROUP="dialout", MODE="0660"
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="1a86", ATTRS{idProduct}=="7523", \
    SYMLINK+="zigbee%n", GROUP="dialout", MODE="0660"

# Dresden Elektronik ConBee/ConBee II/ConBee III
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="1cf1", ATTRS{idProduct}=="0030", \
    SYMLINK+="conbee", GROUP="dialout", MODE="0660"
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6015", \
    SYMLINK+="conbee", GROUP="dialout", MODE="0660"

# Texas Instruments CC2531/CC2530 based adapters
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="0451", ATTRS{idProduct}=="16a8", \
    SYMLINK+="zigbee-cc2531", GROUP="dialout", MODE="0660"

# SMLIGHT SLZB-06/07 (network-based, but USB for flashing)
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="303a", ATTRS{idProduct}=="1001", \
    SYMLINK+="slzb", GROUP="dialout", MODE="0660"

# =============================================================================
# Z-Wave Adapters
# =============================================================================

# Aeotec Z-Stick Gen5/Gen5+ (Silicon Labs)
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="0658", ATTRS{idProduct}=="0200", \
    SYMLINK+="zwave", GROUP="dialout", MODE="0660"

# Aeotec Z-Stick 7 (700 series)
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="8a2a", \
    SYMLINK+="zwave", GROUP="dialout", MODE="0660"

# Zooz ZST10 700 series
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="ea60", \
    SYMLINK+="zwave%n", GROUP="dialout", MODE="0660"

# Nortek HUSBZB-1 (combo Zigbee + Z-Wave)
# Creates two tty devices - the second one is Z-Wave
ACTION=="add", SUBSYSTEM=="tty", ATTRS{idVendor}=="10c4", ATTRS{idProduct}=="8a2a", \
    SYMLINK+="husbzb-%n", GROUP="dialout", MODE="0660"

# =============================================================================
# Generic serial access
# =============================================================================

# Ensure all USB serial and UART devices are accessible
KERNEL=="ttyACM[0-9]*", GROUP="dialout", MODE="0660"
KERNEL=="ttyUSB[0-9]*", GROUP="dialout", MODE="0660"
KERNEL=="ttyAMA[0-9]*", GROUP="dialout", MODE="0660"
